# Server configuration
server.port=8000

# Application name
spring.application.name=api-gateway

# Route configuration
# Core service route - handles main app functionality and proxies to isolated services
spring.cloud.gateway.routes[0].id=core-service
spring.cloud.gateway.routes[0].uri=${CORE_SERVICE_URL:http://core:8080}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/**, /admin/**, /teacher/**, /student/**, /tests/**, /attempts/**, /questions/**, /auth/**, /email/**, /password/**, /prompts/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=0

# Notification service route
spring.cloud.gateway.routes[1].id=notification-service
spring.cloud.gateway.routes[1].uri=${NOTIFICATION_SERVICE_URL:http://notification-service:8082}
spring.cloud.gateway.routes[1].predicates[0]=Path=/notifications/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=0

# Chat service route
spring.cloud.gateway.routes[2].id=chat-service
spring.cloud.gateway.routes[2].uri=${CHAT_SERVICE_URL:http://chat-service:8083}
spring.cloud.gateway.routes[2].predicates[0]=Path=/chat/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=0

# CORS configuration
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=${ALLOWED_ORIGINS:http://localhost:5173,http://localhost:5174,http://localhost:5175}
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true

# Redis configuration
redis.host=${REDIS_HOST:redis}
redis.port=${REDIS_PORT:6379}

# JWT configuration
jwt.secret=${JWT_SECRET_KEY}
jwt.expiration-ms=86400000

# Rate limiting configuration
rate-limiting.enabled=true
rate-limiting.default-limit=100

# Actuator endpoints for monitoring
management.endpoints.web.exposure.include=health,info,metrics,gateway
management.endpoint.health.show-details=always